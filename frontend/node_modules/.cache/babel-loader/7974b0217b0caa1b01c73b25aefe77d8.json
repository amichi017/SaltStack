{"ast":null,"code":"import axios from 'axios';\nimport store from '../store';\nimport { DATE_SELECT, SALT_RETURNS } from './types'; // Date is select\n\nexport const dateSelect = (start, end) => {\n  return {\n    type: DATE_SELECT,\n    payload: {\n      start,\n      end\n    }\n  }; // console.log(\"start \",start);\n  // console.log(\"end \",end);\n}; // Clear date\n\nexport const saltReturns = () => (dispatch, getState) => {\n  const time = new Date().toDateString();\n  let Month = String(parseInt(store.getState().date.start.getMonth()));\n  Month = parseInt(Month) < 10 ? \"0\" + Month : Month;\n  let year = String(store.getState().date.start.getFullYear());\n  let startYear = new Date(year, Month, store.getState().date.start.getDate());\n  let endYear = store.getState().date.end;\n  console.log(startYear, \"startYear\");\n  console.log(endYear, \"endYear\");\n\n  if (store.getState().auth.token !== null) {} // console.log(\"ppppppppppppppppp\");}\n\n\n  let data = [];\n\n  for (let index = startYear; index <= endYear; index.setFullYear(index.getFullYear() + 1)) {\n    axios.get('http://127.0.0.1:5000/api/saltReturns/apply/' + index.getFullYear(), tokenConfig(getState)).then(res => {\n      console.log(\"pppppppppppppppppppppppppppppppppppppppp\");\n      store.dispatch({\n        type: SALT_RETURNS,\n        payload: res.data\n      });\n    }).catch(err => {\n      console.log(err, \"error in data\");\n    });\n  }\n\n  console.log(store.getState(), \"the store from date \");\n}; //  //Clear date\n//  export const saltReturns =  () => (dispatch, getState) => {\n//      const time =new Date().toDateString();\n//  // if(getState().auth.token !== null){      console.log(\"ppppppppppppppppp\");}\n//      axios.get('http://127.0.0.1:5000/api/saltReturns', tokenConfig(getState))\n//     .then((res) => { \n//         // console.log(res,\"res\");\n//     store.dispatch({\n//         type: SALT_RETURNS,\n//         payload: res.data\n//     })})\n//     .catch(err => {\n//         console.log(err,\"error in data\");\n//        });\n//        console.log(store.getState(),\"the store \");\n// };\n// Setup config/headers and token\n\nexport const tokenConfig = getState => {\n  // Get token from localstorage\n  const token = getState().auth.access_token; // Headers\n\n  const config = {\n    headers: {\n      \"Content-type\": \"multipart/form-data\"\n    }\n  }; // If token, add to headers\n\n  if (token) {\n    config.headers[\"Authorization\"] = ` Bearer ${token} `;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["C:/react/SaltStack/frontend/src/actions/date.js"],"names":["axios","store","DATE_SELECT","SALT_RETURNS","dateSelect","start","end","type","payload","saltReturns","dispatch","getState","time","Date","toDateString","Month","String","parseInt","date","getMonth","year","getFullYear","startYear","getDate","endYear","console","log","auth","token","data","index","setFullYear","get","tokenConfig","then","res","catch","err","access_token","config","headers"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport store from '../store'\r\n import { DATE_SELECT, SALT_RETURNS} from './types';\r\n // Date is select\r\n export const dateSelect = (start , end) => {\r\n   \r\n     return {\r\n                 type: DATE_SELECT,\r\n                 payload:{start,end}\r\n              };\r\n     // console.log(\"start \",start);\r\n     // console.log(\"end \",end);\r\n     \r\n }\r\n \r\n // Clear date\r\n  export const saltReturns =  () => (dispatch, getState) => {\r\n     \r\n    const time =new Date().toDateString();\r\n    let Month= String(parseInt(store.getState().date.start.getMonth()));\r\n    Month=parseInt(Month)<10?\"0\"+Month:Month;\r\n    let year=String(store.getState().date.start.getFullYear());\r\n\r\n    \r\n    let startYear=new Date(year,Month,store.getState().date.start.getDate());\r\n    let endYear=store.getState().date.end;\r\n    \r\n    console.log(startYear,\"startYear\");\r\n    console.log(endYear,\"endYear\");\r\n\r\n\r\n if(store.getState().auth.token !== null){   }  // console.log(\"ppppppppppppppppp\");}\r\n\r\n   let data=[];\r\n\r\n for (let index = startYear; index <= endYear; index.setFullYear(index.getFullYear() + 1)) {\r\n    \r\n    axios.get('http://127.0.0.1:5000/api/saltReturns/apply/'+index.getFullYear(), tokenConfig(getState))\r\n    .then((res) => { \r\n        console.log(\"pppppppppppppppppppppppppppppppppppppppp\");\r\n        store.dispatch({\r\n            type: SALT_RETURNS,\r\n            payload: res.data\r\n        })\r\n       \r\n    })\r\n    .catch(err => {\r\n        console.log(err,\"error in data\");\r\n       \r\n       });\r\n }\r\n \r\nconsole.log(store.getState(),\"the store from date \"); \r\n};\r\n//  //Clear date\r\n//  export const saltReturns =  () => (dispatch, getState) => {\r\n     \r\n//      const time =new Date().toDateString();\r\n\r\n//  // if(getState().auth.token !== null){      console.log(\"ppppppppppppppppp\");}\r\n//      axios.get('http://127.0.0.1:5000/api/saltReturns', tokenConfig(getState))\r\n//     .then((res) => { \r\n        \r\n//         // console.log(res,\"res\");\r\n//     store.dispatch({\r\n//         type: SALT_RETURNS,\r\n//         payload: res.data\r\n//     })})\r\n//     .catch(err => {\r\n//         console.log(err,\"error in data\");\r\n       \r\n//        });\r\n\r\n//        console.log(store.getState(),\"the store \");\r\n// };\r\n\r\n\r\n\r\n// Setup config/headers and token\r\nexport const tokenConfig = getState => {\r\n    // Get token from localstorage\r\n    const token = getState().auth.access_token;\r\n  \r\n    // Headers\r\n    const config = {\r\n        headers: {\r\n            \"Content-type\": \"multipart/form-data\"\r\n        }\r\n    }\r\n\r\n    // If token, add to headers\r\n    if(token) {\r\n       config.headers[\"Authorization\"] = ` Bearer ${token} `;\r\n    }\r\n\r\n return config;\r\n}"]},"metadata":{},"sourceType":"module"}