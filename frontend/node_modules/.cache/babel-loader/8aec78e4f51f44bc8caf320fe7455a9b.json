{"ast":null,"code":"import axios from 'axios';\nimport store from '../store';\nimport { DATE_SELECT, SALT_RETURNS } from './types'; // Date is select\n\nexport const dateSelect = (start, end) => {\n  return {\n    type: DATE_SELECT,\n    payload: {\n      start,\n      end\n    }\n  }; // console.log(\"start \",start);\n  // console.log(\"end \",end);\n}; // Clear date\n\nexport const saltReturns = () => (dispatch, getState) => {\n  const start = store.getState().date.start;\n  const end = store.getState().date.end;\n  let year = String(start.getFullYear());\n  let month = parseInt(start.getMonth()) < 10 ? \"0\" + start.getMonth() : start.getMonth();\n  let day = parseInt(start.getDay()) < 10 ? \"0\" + start.getDay() : start.getDay();\n  let time = year + month + day;\n  console.log(\"timet\", start);\n  axios.get('http://127.0.0.1:5000/api/saltReturns', tokenConfig(getState)).then(res => {\n    console.log(res, \"res\");\n    store.dispatch({\n      type: SALT_RETURNS,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err, \"error in data\");\n  });\n}; // Setup config/headers and token\n\nexport const tokenConfig = getState => {\n  // Get token from localstorage\n  const token = getState().auth.token; // Headers\n\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  }; // If token, add to headers\n\n  if (token) {\n    config.headers[\"Authorization\"] = ` Bearer ${token} `;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["C:/react/SaltStack/frontend/src/actions/date.js"],"names":["axios","store","DATE_SELECT","SALT_RETURNS","dateSelect","start","end","type","payload","saltReturns","dispatch","getState","date","year","String","getFullYear","month","parseInt","getMonth","day","getDay","time","console","log","get","tokenConfig","then","res","data","catch","err","token","auth","config","headers"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACC,SAASC,WAAT,EAAsBC,YAAtB,QAAyC,SAAzC,C,CACA;;AACA,OAAO,MAAMC,UAAU,GAAG,CAACC,KAAD,EAASC,GAAT,KAAiB;AAEvC,SAAO;AACKC,IAAAA,IAAI,EAAEL,WADX;AAEKM,IAAAA,OAAO,EAAC;AAACH,MAAAA,KAAD;AAAOC,MAAAA;AAAP;AAFb,GAAP,CAFuC,CAMvC;AACA;AAEH,CATM,C,CAWP;;AACA,OAAO,MAAMG,WAAW,GAAI,MAAM,CAACC,QAAD,EAAWC,QAAX,KAAwB;AACtD,QAAMN,KAAK,GAACJ,KAAK,CAACU,QAAN,GAAiBC,IAAjB,CAAsBP,KAAlC;AACA,QAAMC,GAAG,GAACL,KAAK,CAACU,QAAN,GAAiBC,IAAjB,CAAsBN,GAAhC;AACA,MAAIO,IAAI,GAAEC,MAAM,CAACT,KAAK,CAACU,WAAN,EAAD,CAAhB;AACA,MAAIC,KAAK,GAAEC,QAAQ,CAACZ,KAAK,CAACa,QAAN,EAAD,CAAR,GAA2B,EAA3B,GAAgC,MAAIb,KAAK,CAACa,QAAN,EAApC,GAAqDb,KAAK,CAACa,QAAN,EAAhE;AACA,MAAIC,GAAG,GAAEF,QAAQ,CAACZ,KAAK,CAACe,MAAN,EAAD,CAAR,GAAyB,EAAzB,GAA8B,MAAIf,KAAK,CAACe,MAAN,EAAlC,GAAiDf,KAAK,CAACe,MAAN,EAA1D;AACA,MAAIC,IAAI,GAACR,IAAI,GAACG,KAAL,GAAWG,GAApB;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBlB,KAApB;AACAL,EAAAA,KAAK,CAACwB,GAAN,CAAU,uCAAV,EAAmDC,WAAW,CAACd,QAAD,CAA9D,EACAe,IADA,CACMC,GAAD,IAAS;AACXL,IAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,EAAgB,KAAhB;AACJ1B,IAAAA,KAAK,CAACS,QAAN,CAAe;AACXH,MAAAA,IAAI,EAAEJ,YADK;AAEXK,MAAAA,OAAO,EAAEmB,GAAG,CAACC;AAFF,KAAf;AAGG,GANF,EAOAC,KAPA,CAOMC,GAAG,IAAI;AACVR,IAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ,EAAgB,eAAhB;AACA,GATH;AAUJ,CAlBO,C,CAsBR;;AACA,OAAO,MAAML,WAAW,GAAGd,QAAQ,IAAI;AACnC;AACA,QAAMoB,KAAK,GAAGpB,QAAQ,GAAGqB,IAAX,CAAgBD,KAA9B,CAFmC,CAInC;;AACA,QAAME,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AADE,GAAf,CALmC,CAWnC;;AACA,MAAGH,KAAH,EAAU;AACPE,IAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAmC,WAAUH,KAAM,GAAnD;AACF;;AAEJ,SAAOE,MAAP;AACA,CAjBM","sourcesContent":["import axios from 'axios';\r\nimport store from '../store'\r\n import { DATE_SELECT, SALT_RETURNS} from './types';\r\n // Date is select\r\n export const dateSelect = (start , end) => {\r\n   \r\n     return {\r\n                 type: DATE_SELECT,\r\n                 payload:{start,end}\r\n              };\r\n     // console.log(\"start \",start);\r\n     // console.log(\"end \",end);\r\n     \r\n }\r\n \r\n // Clear date\r\n export const saltReturns =  () => (dispatch, getState) => {\r\n     const start=store.getState().date.start;\r\n     const end=store.getState().date.end;\r\n     let year =String(start.getFullYear());\r\n     let month =parseInt(start.getMonth())<10 ? \"0\"+start.getMonth():start.getMonth();\r\n     let day =parseInt(start.getDay())<10 ? \"0\"+start.getDay():start.getDay();\r\n     let time=year+month+day;\r\n     console.log(\"timet\",start);\r\n     axios.get('http://127.0.0.1:5000/api/saltReturns', tokenConfig(getState))\r\n    .then((res) => { \r\n        console.log(res,\"res\");\r\n    store.dispatch({\r\n        type: SALT_RETURNS,\r\n        payload: res.data\r\n    })})\r\n    .catch(err => {\r\n        console.log(err,\"error in data\");\r\n       });\r\n};\r\n\r\n\r\n\r\n// Setup config/headers and token\r\nexport const tokenConfig = getState => {\r\n    // Get token from localstorage\r\n    const token = getState().auth.token;\r\n  \r\n    // Headers\r\n    const config = {\r\n        headers: {\r\n            \"Content-type\": \"application/json\"\r\n        }\r\n    }\r\n\r\n    // If token, add to headers\r\n    if(token) {\r\n       config.headers[\"Authorization\"] = ` Bearer ${token} `;\r\n    }\r\n\r\n return config;\r\n}"]},"metadata":{},"sourceType":"module"}