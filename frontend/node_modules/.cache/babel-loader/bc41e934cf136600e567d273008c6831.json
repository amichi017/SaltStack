{"ast":null,"code":"import axios from 'axios';\nimport store from '../store';\nimport { DATE_SELECT, SALT_RETURNS } from './types'; // Date is select\n\nexport const dateSelect = (start, end) => {\n  return {\n    type: DATE_SELECT,\n    payload: {\n      start,\n      end\n    }\n  }; // console.log(\"start \",start);\n  // console.log(\"end \",end);\n}; // Clear date\n\nexport const saltReturns = () => (dispatch, getState) => {\n  let start = store.getState().date.start;\n  let end = store.getState().date.end;\n  let tempRes = [];\n\n  for (let index = start; index <= end; index.setDate(index.getDate() + 1)) {\n    let year = String(index.getFullYear());\n    let month = parseInt(index.getMonth()) < 10 ? \"0\" + String(parseInt(index.getMonth()) + 1) : String(parseInt(index.getMonth()) + 1);\n    let day = parseInt(index.getDate()) < 10 ? \"0\" + index.getDate() : index.getDate();\n    let time = year + month + day;\n    let http = 'http://127.0.0.1:5000/api/saltReturns/apply/' + time;\n    axios.get(http, tokenConfig(getState)).then(res => {\n      if (res.data.length > 0) {\n        for (let index = 0; index < res.data.length; index++) {\n          tempRes.push(res.data[index]);\n        }\n      }\n    }).catch(err => {\n      console.log(err, \"error in data\");\n    });\n  }\n\n  console.log(\"tempRes\", tempRes);\n  console.log(store.getState().date, \"store.getState().date\");\n  store.dispatch({\n    type: SALT_RETURNS,\n    payload: tempRes\n  });\n}; // Setup config/headers and token\n\nexport const tokenConfig = getState => {\n  // Get token from localstorage\n  const token = getState().auth.token; // Headers\n\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  }; // If token, add to headers\n\n  if (token) {\n    config.headers[\"Authorization\"] = ` Bearer ${token} `;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["C:/react/SaltStack/frontend/src/actions/date.js"],"names":["axios","store","DATE_SELECT","SALT_RETURNS","dateSelect","start","end","type","payload","saltReturns","dispatch","getState","date","tempRes","index","setDate","getDate","year","String","getFullYear","month","parseInt","getMonth","day","time","http","get","tokenConfig","then","res","data","length","push","catch","err","console","log","token","auth","config","headers"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport store from '../store';\r\n import { DATE_SELECT, SALT_RETURNS} from './types';\r\n // Date is select\r\n export const dateSelect = (start , end) => {\r\n   \r\n     return {\r\n                 type: DATE_SELECT,\r\n                 payload:{start,end}\r\n              };\r\n     // console.log(\"start \",start);\r\n     // console.log(\"end \",end);\r\n     \r\n }\r\n \r\n // Clear date\r\n export const saltReturns =  () => (dispatch, getState) => {\r\n    \r\n     let start=store.getState().date.start;\r\n     let end=store.getState().date.end;\r\n     let tempRes=[];\r\n     for (let index = start; index <= end; index.setDate(index.getDate() + 1)) \r\n     {\r\n      \r\n        let year = String(index.getFullYear());\r\n        let month = parseInt(index.getMonth())<10 ? \"0\"+String(parseInt(index.getMonth())+1):String(parseInt(index.getMonth())+1);\r\n        let day = parseInt(index.getDate())<10 ? \"0\"+index.getDate():index.getDate();\r\n        let time= year+month+day;\r\n        let http='http://127.0.0.1:5000/api/saltReturns/apply/' + time;\r\n      \r\n        axios.get(http, tokenConfig(getState))\r\n        .then((res) => {\r\n           \r\n            if(res.data.length>0){\r\n                for (let index = 0; index < res.data.length; index++) {\r\n                  \r\n                    tempRes.push(res.data[index]); \r\n                }\r\n            }\r\n         })\r\n        .catch(err => {\r\n            console.log(err,\"error in data\");\r\n        });\r\n    }\r\n    console.log(\"tempRes\",tempRes);\r\n    console.log(store.getState().date,\"store.getState().date\");\r\n    store.dispatch({\r\n        type: SALT_RETURNS,\r\n        payload: tempRes\r\n    });\r\n};\r\n\r\n\r\n\r\n// Setup config/headers and token\r\nexport const tokenConfig = getState => {\r\n    // Get token from localstorage\r\n    const token = getState().auth.token;\r\n  \r\n    // Headers\r\n    const config = {\r\n        headers: {\r\n            \"Content-type\": \"application/json\"\r\n        }\r\n    }\r\n\r\n    // If token, add to headers\r\n    if(token) {\r\n       config.headers[\"Authorization\"] = ` Bearer ${token} `;\r\n    }\r\n\r\n return config;\r\n}"]},"metadata":{},"sourceType":"module"}